---
title: ggplot入りの日本語RmdをPDF出力する
author: ''
date: '2017-12-08'
slug: ggplot入りの日本語rmdをpdf出力する
categories: [R]
---



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>件名の通りだが、設定に結構苦労した。下記のYAMLコードを設定。デフォルトのフォントはMeiryoを指定。全てWindows環境で動作は確認。前提としてTexliveのインストールは必要。 また<strong>Rmdファイルの名前を日本語にするとエラーを吐く</strong>のでファイル名を英語にしてあげることも必要。</p>
</div>
<div id="yaml" class="section level1">
<h1>YAML</h1>
<pre class="r"><code>---
title: &quot;ggplot_japanese_rmarkdown&quot;
date: &quot;`r format(Sys.time(), &#39;%Y/%m/%d&#39;)`&quot;
output:
  pdf_document:
    latex_engine: xelatex
    number_sections: true
    toc: true
header-includes: 
  - \usepackage{xltxtra} 
  - \usepackage{zxjatype} 
  - \usepackage[ipa]{zxjafont} 
  - \setjamainfont{Meiryo}  
  - \setmainfont{Meiryo} 
---</code></pre>
</div>
<div id="ggplot" class="section level1">
<h1>ggplotに日本語入れる対策コード</h1>
<p>こちらをinclude=FALSEで走らせる、以降はふつうにggplot書いてあげればOK</p>
<pre class="r"><code>library(knitr)

if (knitr::opts_knit$get(&quot;rmarkdown.pandoc.to&quot;) %in% c(&quot;beamer&quot;, &quot;latex&quot;)) {
  options(device = function(file, width = 7, height = 7, ...) {
    cairo_pdf(tempfile(), width = width, height = height, ...)
  })
  knitr::opts_chunk$set(dev=&quot;cairo_pdf&quot;, dev.args=list(family=&quot;Meiryo&quot;))
}</code></pre>
</div>
